<div class="container">
  <div class="search row text-center">
    <h1>Pregled trafostanica</h1>
    <div>
      <h3>Pretraga</h3>
      <form class="form-inline">
        <div class="form-group"> 
          <!-- Select Voltage Transforamtion -->
          <input type="text" class="form-control" id="search" 
                  (keypress) = "search($event)"
                  placeholder="Naziv trafostanice">
               <!-- Select Voltage Transforamtion -->
           <!-- <div class="form-group">-->
              <select class="custom-select btn btn-primary dropdown-toggle" id="filter" 
                  [formControl] = "filterControl" 
                  (click) ="toggleDropdownValue()">Prenosni odnos<span class="caret"></span>
                <option>Prenosni odnos</option>
              <option  [ngClass] = "{'show':toggleDropdown}"
              *ngFor = "let vT of vTs"
              [value]="vT">{{vT}}</option>
              </select>
            <!-- </div> -->
            <button type="button" class="btn btn-primary"
          (click)="filter()">
            <i class="glyphicon glyphicon-search">Pretraga</i>
          </button>
        </div>  
      </form>
      <div>
        <h3>Kreiranje</h3>
        <a routerLink = "/substation-new"
                class="btn btn-primary" 
                role="button">Kreiraj</a>
      </div>
    </div>
  </div>
  <hr>

  <div class="modal" [ngClass]="{'show': showModal}" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
            <h4>Podaci o trafostanici</h4>
            <app-substation-detail 
                  *ngIf="showDetail"
                 [substationDetail]="selectedSubstation"></app-substation-detail> 
            <app-substation-update
                *ngIf="showUpdate"
                [substationUpdate]="selectedSubstation"></app-substation-update>
            <div class="delete"
               *ngIf="showDelete">
              <p>Da li ste sigurni da želite obrisati trafostanicu {{selectedSubstation.fullName}} ?</p>
              <button type="button" 
              class="btn btn-default" 
              data-dismiss="modal"
              (click)="onDelete(selectedSubstation)">Da, obriši trafostanicu</button>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" 
          class="btn btn-default" 
          data-dismiss="modal"
          (click)="onCloseModal()">Zatvori</button>
        </div>
      </div>
    </div>
  </div>
   <table class="table table-striped table-hover text-center row">
      <thead>
          <tr> 
              <th>id</th>
              <th>Region</th>
              <th>Grad</th>
              <th>Opština</th>
              <th>Naponski nivo</th>
              <th>ISS KOD</th>
              <th>Naziv</th>
              <th>Puni naziv</th>
              <th>Akcije</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let sub of substations">
              <td>{{ sub.id }}</td>
              <td>{{ sub.region }}</td>
              <td>{{ sub.city }}</td>
              <td>{{ sub.municipality }}</td>
              <td>{{ sub.voltageTransformation }}</td>
              <td>{{ sub.issCode }}</td>
              <td>{{ sub.name }}</td>
              <td>{{ sub.fullName }}</td>
              <td>
                <a class="glyphicon glyphicon-th"
                style="margin-right: 10px;"
                (click)="onShowModal(sub)"></a>
                <a class="glyphicon glyphicon-pencil"
                style="margin-right: 10px;"
                (click)="onShowUModal(sub)"></a>
                <a class="glyphicon glyphicon-remove"
                (click)="onShowDeleteModal(sub)"></a>
            </td>
          </tr>
        </tbody>
    </table>

   
  </div>
